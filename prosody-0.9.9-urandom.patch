Upstream: http://hg.prosody.im/0.9/rev/ad9e683b8f0b

diff -r eed0632cd636 -r ad9e683b8f0b util/uuid.lua
--- a/util/uuid.lua	Fri Jan 08 13:01:32 2016 +0000
+++ b/util/uuid.lua	Sun Jan 10 23:21:34 2016 +0100
@@ -8,7 +8,7 @@
 
 local error = error;
 local round_up = math.ceil;
-local urandom, urandom_err = io.open("/dev/urandom", "r+");
+local urandom, urandom_err = io.open("/dev/urandom", "r");
 
 module "uuid"
 
@@ -30,9 +30,7 @@
 	return get_nibbles(8).."-"..get_nibbles(4).."-4"..get_nibbles(3).."-"..(get_twobits())..get_nibbles(3).."-"..get_nibbles(12);
 end
 
-function seed(x)
-	urandom:write(x);
-	urandom:flush();
+function seed()
 end
 
 return _M;




